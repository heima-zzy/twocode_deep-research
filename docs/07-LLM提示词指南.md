# LLM 提示词指南

本文档为每个开发阶段提供专门的LLM提示词，帮助开发者高效地使用AI助手完成Deep Research项目的二次开发任务。

## 使用说明

1. **选择合适的提示词**：根据当前开发阶段选择对应的提示词
2. **提供上下文**：将相关的代码文件和项目信息提供给LLM
3. **明确需求**：在提示词基础上添加具体的功能需求
4. **迭代优化**：根据LLM的输出进行调整和优化

## 阶段一：路由结构设计与页面架构

### 提示词1.1：路由结构重构

```
我正在基于Deep Research项目进行二次开发，需要重新设计路由结构。

当前状态：
- 根路径 `/` 直接显示深度研究界面
- 所有功能集中在单一页面中

目标：
- 将聊天首页设为根路径 `/`
- 将深度研究功能迁移到 `/research` 路径
- 保持所有现有功能不变

请帮我：
1. 分析当前的路由结构和页面组织方式
2. 设计新的路由架构
3. 提供具体的文件迁移步骤
4. 确保迁移过程中不破坏现有功能

请先查看 src/app/page.tsx 和 src/app/layout.tsx 文件，然后给出详细的重构方案。
```

### 提示词1.2：聊天页面布局设计

```
我需要为Deep Research项目创建一个类似DeepSeek的聊天首页布局。

设计要求：
- 左侧边栏：历史对话、历史研究记录、知识库配置入口
- 主内容区：消息列表、输入框、深度研究按钮
- 响应式设计：适配移动端、平板端、桌面端
- 保持与现有设计风格的一致性

技术栈：
- Next.js 14 + React 18
- Tailwind CSS
- Shadcn/ui 组件
- Zustand 状态管理

请帮我：
1. 设计整体的布局架构
2. 创建主要的布局组件
3. 实现响应式断点处理
4. 确保与现有组件的兼容性

请先查看现有的组件结构，特别是 src/components 目录，然后提供布局设计方案。
```

## 阶段二：数据层扩展与AI对话集成

### 提示词2.1：聊天数据模型设计

```
我需要为Deep Research项目扩展数据层，添加聊天功能的状态管理。

当前状态管理：
- 使用Zustand + persist中间件
- 现有store：task.ts, knowledge.ts, setting.ts, history.ts, global.ts

新增需求：
- 聊天消息管理
- 对话会话管理
- 聊天历史持久化
- 与现有历史记录系统集成

请帮我：
1. 设计聊天相关的数据结构和类型定义
2. 创建聊天状态管理store
3. 实现数据持久化机制
4. 确保与现有store的兼容性

请先查看现有的store文件（特别是 src/store/ 目录）和类型定义（src/types.d.ts），然后设计数据模型。
```

### 提示词2.2：AI对话功能集成

```
我需要在Deep Research项目中实现AI对话功能，复用现有的AI提供者架构。

现有AI架构：
- 支持多种AI提供者（OpenAI、Anthropic、DeepSeek等）
- 已实现流式处理机制
- 现有知识库系统可集成

新增需求：
- 实现聊天专用的Hook
- 支持流式对话响应
- 集成知识库上下文
- 实现对话管理功能

请帮我：
1. 创建useChat Hook，复用现有AI提供者
2. 实现流式对话功能
3. 集成知识库上下文支持
4. 创建聊天API端点

请先查看现有的AI相关代码（src/hooks/useAiProvider.ts, src/utils/deep-research/, src/app/api/）然后实现对话功能。
```

## 阶段三：UI组件开发与用户界面实现

### 提示词3.1：聊天界面组件开发

```
我需要开发Deep Research项目的聊天界面组件，实现类似DeepSeek的用户体验。

组件需求：
- MessageList：消息列表，支持虚拟滚动
- MessageItem：消息项，支持用户消息、AI回复、系统消息
- ChatInput：输入框，支持多行输入和快捷键
- DeepResearchButton：跳转到深度研究的按钮
- WelcomeScreen：欢迎界面

技术要求：
- 使用TypeScript定义清晰的接口
- 支持Markdown渲染（复用现有MagicDown组件）
- 实现流式文本显示
- 添加加载状态和错误处理

请帮我：
1. 设计组件架构和接口定义
2. 实现核心的聊天组件
3. 集成现有的UI组件库
4. 确保组件的可复用性和可测试性

请先查看现有的组件（特别是 src/components/Research/ 和 src/components/ui/），然后开发聊天组件。
```

### 提示词3.2：左侧边栏组件开发

```
我需要为Deep Research项目开发功能完整的左侧边栏组件。

功能需求：
- 历史对话列表：分组显示、搜索过滤、重命名删除
- 历史研究记录：复用现有历史组件逻辑
- 快速操作：知识库配置、设置入口、主题切换
- 响应式行为：移动端覆盖层、桌面端固定显示

交互需求：
- 支持拖拽调整宽度
- 实现键盘导航
- 添加右键菜单
- 支持批量操作

请帮我：
1. 设计侧边栏的组件架构
2. 实现历史记录的管理功能
3. 添加搜索和过滤功能
4. 实现响应式交互行为

请先查看现有的History组件（src/components/History.tsx）和全局状态管理，然后开发侧边栏组件。
```

### 提示词3.3：响应式设计优化

```
我需要为Deep Research项目实现全面的响应式设计，确保在各种设备上都有良好的用户体验。

设备适配：
- 移动端（<768px）：隐藏侧边栏，全屏显示主内容
- 平板端（768px-1024px）：可折叠侧边栏
- 桌面端（>1024px）：固定侧边栏显示

优化重点：
- 触摸交互优化
- 移动端键盘适配
- 性能优化（虚拟滚动、懒加载）
- 无障碍访问支持

请帮我：
1. 实现响应式断点处理
2. 优化移动端交互体验
3. 实现性能优化策略
4. 添加无障碍访问支持

请先查看现有的样式配置（tailwind.config.ts）和组件的响应式实现，然后提供优化方案。
```

## 阶段四：功能集成与系统优化

### 提示词4.1：页面导航与状态传递

```
我需要实现Deep Research项目中聊天页面与深度研究页面之间的无缝导航和状态传递。

导航需求：
- 从聊天跳转到深度研究：传递对话内容作为研究主题
- 从研究返回到聊天：将研究结果作为聊天上下文
- 保持用户设置和配置的一致性
- 支持浏览器前进后退

技术实现：
- 使用Next.js路由系统
- 设计状态传递机制
- 实现数据的序列化和反序列化
- 添加过渡动画效果

请帮我：
1. 设计导航状态管理系统
2. 实现页面间的数据传递
3. 创建导航Hook和工具函数
4. 确保导航的流畅性和可靠性

请先查看现有的路由结构和状态管理，然后实现导航功能。
```

### 提示词4.2：性能优化实施

```
我需要对Deep Research项目进行全面的性能优化，提升用户体验。

优化目标：
- 首屏加载时间 < 2秒
- 交互响应时间 < 100ms
- 支持大量历史记录的流畅渲染
- 优化内存使用和防止内存泄漏

优化策略：
- 代码分割和懒加载
- 虚拟滚动实现
- 缓存策略优化
- React性能优化

请帮我：
1. 分析当前的性能瓶颈
2. 实现虚拟滚动组件
3. 优化状态管理和组件渲染
4. 设计缓存策略
5. 添加性能监控

请先分析现有代码的性能特点，然后提供具体的优化方案和实现代码。
```

## 阶段五：测试与部署验证

### 提示词5.1：测试用例编写

```
我需要为Deep Research项目编写全面的测试用例，确保新功能和现有功能的稳定性。

测试范围：
- 单元测试：组件、Hook、工具函数
- 集成测试：页面功能、API集成、状态管理
- 端到端测试：完整用户流程

测试框架：
- Jest + React Testing Library（单元测试）
- MSW（API模拟）
- Playwright或Cypress（E2E测试）

请帮我：
1. 设计测试策略和测试用例
2. 编写关键组件的单元测试
3. 实现集成测试
4. 创建端到端测试流程
5. 配置CI/CD测试流水线

请先查看现有的测试配置和代码结构，然后编写测试用例。
```

### 提示词5.2：部署配置优化

```
我需要为Deep Research项目配置生产环境部署，确保应用在真实环境中稳定运行。

部署需求：
- 支持Docker容器化部署
- 支持Vercel云平台部署
- 配置环境变量和安全设置
- 实现监控和日志系统

优化重点：
- 构建性能优化
- 静态资源优化
- CDN和缓存配置
- 安全性配置

请帮我：
1. 优化Docker配置和构建流程
2. 配置Vercel部署设置
3. 实现环境变量管理
4. 添加监控和告警系统
5. 编写部署文档

请先查看现有的部署配置（Dockerfile, vercel.json等），然后提供优化方案。
```

## 通用提示词模板

### 代码审查提示词

```
请帮我审查以下代码，重点关注：

1. **代码质量**：
   - 是否符合TypeScript最佳实践
   - 是否有潜在的类型安全问题
   - 是否遵循React Hooks规则

2. **性能考虑**：
   - 是否有不必要的重渲染
   - 是否正确使用了useMemo和useCallback
   - 是否有内存泄漏风险

3. **可维护性**：
   - 代码结构是否清晰
   - 是否有适当的错误处理
   - 是否需要添加注释

4. **与现有代码的兼容性**：
   - 是否与现有架构一致
   - 是否正确使用了现有的工具和组件

[在此处粘贴要审查的代码]
```

### 问题排查提示词

```
我在Deep Research项目开发中遇到了以下问题：

**问题描述**：[详细描述问题现象]

**错误信息**：[如果有错误信息，请粘贴完整的错误堆栈]

**相关代码**：[粘贴相关的代码片段]

**环境信息**：
- Node.js版本：
- 浏览器版本：
- 操作系统：

**已尝试的解决方案**：[列出已经尝试过的解决方法]

请帮我：
1. 分析问题的根本原因
2. 提供具体的解决方案
3. 给出预防类似问题的建议
```

### 功能扩展提示词

```
我想为Deep Research项目添加新功能：[功能描述]

**功能需求**：
- [具体的功能要求1]
- [具体的功能要求2]
- [具体的功能要求3]

**技术约束**：
- 必须与现有架构兼容
- 不能影响现有功能的性能
- 需要支持响应式设计

**参考实现**：[如果有参考的实现或类似功能，请描述]

请帮我：
1. 分析功能的技术可行性
2. 设计实现方案
3. 识别可能的技术风险
4. 提供具体的实现步骤
5. 建议相应的测试策略
```

## 使用技巧

1. **提供充分的上下文**：在使用提示词时，尽量提供相关的代码文件和项目信息
2. **明确具体需求**：在通用提示词基础上，添加具体的功能需求和约束条件
3. **迭代式开发**：根据LLM的输出进行调整，逐步完善功能实现
4. **验证和测试**：对LLM生成的代码进行充分的测试和验证
5. **文档记录**：将重要的设计决策和实现细节记录在文档中

## 注意事项

1. **代码安全**：不要在提示词中包含敏感信息（API密钥、密码等）
2. **版本兼容**：确保生成的代码与项目的技术栈版本兼容
3. **性能考虑**：始终关注代码的性能影响，特别是在处理大量数据时
4. **错误处理**：确保生成的代码包含适当的错误处理逻辑
5. **测试覆盖**：为新功能编写相应的测试用例

通过合理使用这些提示词，可以大大提高开发效率，确保项目的高质量交付。